@prefix rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#> .
@prefix rdfs: <http://www.w3.org/2000/01/rdf-schema#> .
@prefix owl: <http://www.w3.org/2002/07/owl#> .
@prefix xsd:  <http://www.w3.org/2001/XMLSchema#> .
@prefix sosa: <http://www.w3.org/ns/sosa/> .
@prefix : <http://www.semanticweb.org/matheusdbampi/ontologies/2023/6/aal-ontology-lite/> .

# ---------------------------------------------
#               General Rules
# ---------------------------------------------

# if an observation is made by a sensor that observes a property, then the observation also observes the same property
[observesInference: 
    (?o rdf:type sosa:Observation) 
    (?o sosa:madeBySensor ?s) 
    (?s sosa:observes ?op) 
    -> 
    (?o sosa:observes ?op)
]

# if an observation is made by a sensor that has a feature of interest, then the observation also has the same feature of interest
[featureOfInterestInference: 
    (?o rdf:type sosa:Observation) 
    (?o sosa:madeBySensor ?s)
    (?s sosa:hasFeatureOfInterest ?foi) 
    -> 
    (?o sosa:hasFeatureOfInterest ?foi)
]


# ---------------------------------------------
#               Medical Rules
# ---------------------------------------------

# if the heart rate is above 80 trigger a heartrate event
# associate the event with the observation that triggered it
[heartRateRule: 
    (?o rdf:type sosa:Observation) 
    (?o sosa:observes :HeartRate) 
    (?o sosa:hasSimpleResult ?r) 
    greaterThan(?r, 80)
    (?o sosa:resultTime ?t)
    -> 
    (:triggerHeartrate rdf:type :Trigger)
    (:triggerHeartrate :inferredBy ?o)
]
